---
date: 2024-05-17 23:55
tags:
  - 趣闻
  - PL
  - 对话录
category: life
---
# 再赴上海 与朋友共度美好时光

## 与 MHYYYY 吃饭

众所周知 MHYYYY 是一个中文互联网上知名的键政博主，以较全面与客观而闻名。

去年8月的一个下午，我无意中点开了他的油管主页：[MHYYYY](https://www.youtube.com/@MHYYY123)

那是一个普普通通的下午，一个懵懂的小镇做题家开始睁眼看世界，开始思考自己的人生，开始决定自己的未来。

今天能与MHYYYY一起吃饭真的非常荣幸。

但他居然挑了一家中午不营业的店，哈哈哈。

之后我们换到了一家泰餐馆吃饭，倒是没怎么聊政治与哲学，而是聊了聊我们的家庭和人生，聊了聊我们的未来。

他说他一般会拒绝约饭，我比较幸运，MHY觉得我是正常人，可以见。

之后重点落在了AI与对MHYYYY视频的建议上。
### AI

米老师想使用AI将字幕转为公众号文章，或者添加合理的标点符号

[科技如何深刻改变政治？——近代：地理大发现与全球一体化|现代：核威慑；网络时代键政兴起|近未来：人工智能、太空计划、核聚变|远未来：永生阶梯永恒改变人类社会](https://www.youtube.com/watch?v=PGONXKTAYzE)


### 对MHYYYY视频的建议

多玩点游戏，搞游戏实况（像[稚嫩的魔法师](https://space.bilibili.com/1276787)那样）
整点XX游记 （虽然M在香港游记的视频结尾说他之后大概不会做这样的视频了）

吃完饭后匆匆道别，想回嘉兴的我看到高铁票全部卖光，呆呆地站在路边。

想到要不要去找同济大学的朋友玩会。

## 同济大学（嘉定校区）游记

这个校区是新建的，真的很大呢。

![](/assets/blogs/diary/5-17/map.jpg)

朋友是在这个校区上学的，对PL有着浓厚兴趣，看起来很有激情。

我们在校园里和旁边的商业区逛了逛，聊了聊我们的未来，聊了聊PL的未来。

### 漫游校园

#### 探探图书馆

![](/assets/blogs/diary/5-17/library.jpg)

说起来，同济大学的图书检索系统可真老旧，几台终端动不动就卡住，不能访问，或是直接死机
朋友评价为：传家宝系统。

我好奇这个校区藏书有没有我感兴趣的，以下是我的调查结果：
- 哈耶克，无
- 文革，无
- Haskell，有很多，英文版
- Rust，有
- 新青年，新进的，进了一堆（
大概是因为这不是文科校区吧。
#### 教育模式

真羡慕这么大的校区，有单独的生活区，全是好吃的。

![](/assets/blogs/diary/5-17/life_zone.jpg)

食堂也便宜得很，这就是计划模式的高等教育的好处吧。

相比国外的市场化教育，这里的学生们的经济负担很小。

在全球范围内，高等教育系统通常可以分为两种基本模式：计划模式和市场模式。这两种模式在管理结构、资金来源、教育目标等方面有着本质的不同。下面我会分别介绍这两种模式的特点。

##### 计划模式高等教育

计划模式高等教育，又称为中央计划或政府主导模式，强调的是国家对教育系统的直接控制和管理。这种模式下，教育政策、招生计划、资金分配等关键事项由政府部门决策和执行。

- **政府资助：** 大部分或全部经费来自政府，学生可能享有较低的学费或免学费。
- **统一规划：** 教育内容、课程设置、师资配备等均按照国家标准统一规划。
- **社会目标导向：** 教育目标侧重于满足国家的经济发展和社会需求，如重点支持工程、医学等领域。
- **限制市场干预：** 市场在教育领域的作用相对有限，政府通过各种政策工具调控教育供需。

例如，许多（特色）社会主义国家采用的是计划模式高等教育，政府通过严格的政策和规划来确保教育系统与国家的长远目标相一致。

能更好地确保教育公平和服务于国家长期战略，但可能缺乏灵活性和创新。

##### 市场模式高等教育

市场模式高等教育则是基于市场机制运作的系统，强调教育服务的市场化、私有化和竞争。

- **资金多样化：** 资金来源可以是学费、私人投资、捐赠等，不完全依赖政府资助。
- **自主管理：** 教育机构在招生、课程设置、财务管理等方面拥有较大的自主权。
- **市场需求导向：** 课程和专业的设置更多地反映市场需求和就业趋势，强调实用性和创新。
- **竞争和效率：** 教育机构之间存在竞争，追求高效率和高质量的教育服务以吸引学生。

能激励创新和效率提升，但可能导致教育资源的不平等分配。

我的观点目前不方便透露，但我想喷一句：计算机系的某些教授能否扔掉你那逼ppt，回归到实践上好吗。


### 在星巴克里对拼五子棋
（我被碾压了（悲）

哈哈哈哈哈哈（通过笑声掩盖我的棋力不足


### 在萨莉亚讨论PL

第一次吃，居然有这么便宜实惠的西餐厅。
点的芝士土豆泥+墨汁意面（二乔同款）非常的香甜与美味，（感谢 Wtz_LASR 的款待）

![](/assets/blogs/diary/5-17/food.jpg)

（真的很好吃

在萨莉亚里讨论Asahi（我的一个旧玩具，准备重构）
#### 引入**purely function** + **lazy evaluation**

这是我在学Haskell时学到的，我认为**Asahi**这样的**dsl**很适合引入这两个特性。

首先**Asahi**本来就是 **lazy evaluation** 的（基于闭包运行（））
其次许多用户编写的代码本来就是纯函数的，会涉及许多纯函数的计算与equals运算

引入**purely function**再配合 **lazy evaluation** 可以很好的做`Equational reasoning` （正好帝球和我的讨论提到了）

令我震惊的是，很多人居然没有意识到这点，因为我在意识到**Haskell**有这两者后就有这个想法了。
![](/assets/blogs/diary/5-17/lazy-eval-with-pure-func.png)


#### Asahi的性能为什么相较于其他实现一骑绝尘

对比 **Kether** 的话，讨论结果是因为Asahi的闭包没有那么多的嵌套，JVM好做优化。

而 **Kether** 的闭包嵌套太多，JVM对复杂嵌套的闭包优化不好，导致性能落后。

#### **Asahi**的现在与未来

现在的**Asahi**仅仅是一个**toy-lang**，为了开发者拓展性与易用性做了太多妥协。

例如：
- 整个Parser都是基于开发者去拓展 **prefix parser** 和 **infix parser** 的（并且infix还很草台
- 没有一个良好的类型系统导致了诸多性能与开发体验的问题
- 完全靠JVM后期去优化，我知道这太摆烂了。


我认为**Asahi**作为一个提倡易用性的**DSL**，应当在简单易用的基础上应该尽可能地加入更多合适的feat.

目前初步计划是：

- **Gradual Typing**
- **purely function** + **lazy evaluation**
- Parser拓展扬了，改成正常点的吧，起码规范方面是没那么多逼事了。
- 编译到JVM Bytecode，JVM对闭包的优化也是有限的
- And More....

具体的可以来看 Asahi 的 [Issues · Skillw/Asahi (github.com)](https://github.com/Skillw/Asahi/issues)

我会跟进各个feat实现的进度与遇到的问题。

![](/assets/blogs/diary/5-17/view_1.jpg)
![](/assets/blogs/diary/5-17/view_2.jpg)

## 回嘉兴的路上

与朋友共度了一个很美好的下午后，晚上七点恋恋不舍的告别了。

在高铁上看到帝球发了新的小长文：
完整的对话讨论我会放在[帝球对话录](blogs/chatlog-with-frankHB.md)
### FrankHB-3

 > 今天一整天都在搬家，很累。
> 
> #### 关于非良定义词汇的滥用
> 这几天和朋友们讨论过这个问题，我深深地意识到了自己的错误。
> 
> lyzh：
> 
> > 水货的教育系统，搞出来水的概念都搞不清的人
> > 市面上烂大街的三流知识到处流传
> 
> 诶，水货，我是实实在在的水货。

考虑到标准化考试教育出来的高分低能者，会自己上 GitHub 说人话的相比起来（按比例算）应该是人上人了，所以大可不必妄自菲薄。

危险的是自满而不自知。这集中表现在具有实在话语权并有实力影响别人的人——比如学术权威和网红（虽然这么并列有些怪但并没错）——有多大水分没被公众认知而造成超额风险。这么一来，主要是得避免*德不配位*。没有影响力去误导他人，没有掌握大量资源进行滥用和浪费的权力，那么坏事做得再多，破坏也相对有限，即便作恶的性质和程度可以有质的区别，说到底无非也就是小鬼。也因此对开源项目的作者（特别是做了自我宣传的）的要求自然也是要高一些的。

> 
> 感谢你们让我再次意识到这点， 在这之前我貌似根本没有彻底认清我说的某些词汇究竟代表什么。
> 
> 现在我也非常讨厌非良定义的东西被滥用了。
> 
> 看来我得重新好好地审视一下我自己了。( 我的态度有根本上的问题。 )
> 
> 我会记住这段话的：
> 
> > 上梁不正下梁歪。要这么简单的常识性问题都没拎明白，好意思设计语言？
> > 鄙视这种层次的东西和鄙视一般民科的立场是差不多的，
> > 下游偏听偏信先不管，源头一定要遏制。
> 
> #### 关于我的学习
> ##### 关于Asahi
> 我会改称为dsl的，脚本语言属实欠妥了，我了解到脚本语言这玩意就不是个良定义的东西。
> 
> （？）： 从某个角度来说，C++甚至也算脚本语言。
> 

技术上是有可以算的情形。也可以看出这样一说这词其实就没多少现实意义了。

> 同时要给Asahi加的一些feat我会以issue的形式公开。 例如 PFP + lazy evaluation 是一定会引入的了。
> 
> ##### 另一条路
> 我这边有个4人团队（和我年龄相仿），正在画一个VM的饼(从4月开始)，这个饼的定位是比JVM更底层一点或者和JVM一致。目的和我的asaka一样，是为了学习。
> 
> 有个很年轻的成员[LizBing (Lei Zaakjyu) (github.com)](https://github.com/LizBing/) 已经自己开始实现了。（用Rust + C）
> 

你能找到搭子这相比我就是人生赢家。

> ##### 关于Asaka
> 哎，不要期待这玩意，这只是我的练手玩具，用来进一步熟悉编译器后端的东西，目前和truffle比不了。
> 
> ##### 其实我想借项目实践学更多东西
> 可能要花费很长时间了。
> 
> ##### IR
> 会接触更多层IR，不同的IR。
> 
> （当然target如果是JVM bytecode的话属实没这个必要，我是为了学习。）
> 
> ###### IR Pass
> 预计会很复杂，目前Asaka的太乱了要被重构的。
> 
> ###### Codegen Target
> 目前Asaka在计划内的target有JVM bytecode和LLVM。
> 
> target预计会再加一个我们的VM bytecode
> 
> ###### And more...
> * [新坑 - Partial Evaluation教程 (zhihu.com)](https://zhuanlan.zhihu.com/p/642826067)
> * GC
> * JIT
> * AOP
> * ...
> 

兴趣多至少在入门阶段不算坏事，但是作为过来人需要警告一下：你填不完坑。什么都半途而废就没意义了。

不过，半途而废其中一些并不算没有意义，虽然有什么意义非常依赖具体问题。

一个具体的实例：很多年以前我是准备搞类似 nanopass 的东西的，但是后来仔细一想，注意（~~注意力惊人~~过程略，这里至少省略了如何注意到 nanopass 自定义语言的先进性以及在这里为何不必要，留作习题）到 pass 这个概念本身说白了也就是 pipe filter 这个 architectural pattern 的一个应用的实现细节，为什么不化整为零呢？因为传统的 pass 的 global 性质其实并没什么技术上的必然性——几乎从不被源语言规范这样的需求明确要求；局部存在的任何类似 callback 或者 handler 这样的 buzzword 的东西都可以实现相近的“干活”的目的。实际上，pass 这个概念虽然一开始是在编译器这个领域的实现套路上简化问题（因为 pipe stage 单独抽象至少相对 resolve 掉所有依赖得到一个复杂的图结构是简单多了的），但之后存在的必要主要体现在减少大型项目的模块化设计复杂性和沟通成本（4 个人不太容易体现；GCC 那种几百个 pass 如果不分组而是泛化成一般的图，怕是几百号人瞬间就 hold 不住而都得卷铺盖）。考虑最优的原型设计和有生存能力的工程项目这两个角度其实是冲突的，而且光是折中就很吃工程经验，所以这里的决策难做却不太涨经验。因为我不指望别人来干活，所以后来干脆就取消 global passes 了，也没碍着我什么。如果不是削尖脑袋到现有编译器项目中打工（我不缺这种履历），这个思考的过程，可能比实际参与编译器项目的收益更大。（要能有资格决定现有架构横竖都得是个 principal architect 往上，四舍五入就是自己搞个 LLVM 类似物……）

另一个具体的实例：不是作为接口公开的 IR 很大程度没有必要。反过来，成功的 IR 多数都有刚需，比如 LLVM IR 是连接前后端的 lingua franca ，考虑到前后端都理解的人力太难找，引入 IR 公开作为中间层的核心在工程上非常有效且近乎必要。另一方面，公开 IR 又会阻碍演进，JS 运行时的 IR 很多都不怎么公开所以方便做 tradeoff 调整不同 layer/profile 的 JIT compiler 。可以看出如何引入 IR 这个问题的水非常深，也同样取决于你打算多少人陪你一起挖坑。（具体思路和过程可以当作作业自习。）

但与上面不同的是，“尽量避免引入 IR ”这个决策远不只是工程上具有重要性：考虑到的极端情况——那就是纯粹 PL 理论上困难而未决的有趣情况了（源语言设计的光滑性，又导向到了我的研究兴趣）。可见，失之东隅，收之桑榆。


> 如你所说
> 
> > 实际做确实是最有效的积累原始经验而足够入门的办法。
> 
> #### 自发秩序与建构秩序
> > 后知后觉丢人不丢人？要是一开始就理清楚脉络，就没那么拖沓的事了。
> 
> 我是个很喜欢建构秩序的人，我总觉得自发秩序的效率不如建构秩序。
> 
> 我在各种方面都偏向建构秩序，例如经济上我更喜欢让有形的大手做点宏观调控（ （还有其他方面，但我觉得跑题了且有可能会引起意识形态对立，暂且不提了。）
> 
> 当然建构秩序很考验建构的人的水平，但像上面那几位找错了门就很难绷了。
> 
> 所以下面这句话很重要：
> 
> > 注意主线，无论是历史还是具体的知识结构上。
> 

这就涉及意识形态的屁股问题了，不宜深入。

不过挖掉屁股，可以换个更有建设性的说法：设计 vs. 演化。

我更偏向于人为设计，因为自然演化很难符合有明确目的性的需要。这个语境下倒是比较接近你说的建构秩序。

重点是，**PL 这个领域本来就是人为设计占主导和核心地位的**，有些问题的答案就是“不为什么，一开始就是这么设计的”。所以不少时候并不能流于信仰遵从本能了。如果不认同这点，克服思维惯性需要有额外的代价。所以恭喜你，最基本的天赋是正的……

（数学很大程度也是设计，理论物理大多也是而且越玄学的设计成分越大，但实验科学不是。）

顺便，从这里的立场可以导出很多其它的很自然的偏好，比如我不喜欢 NLP 因为对象就是充满随机演化不断需要没完没了地逆向（瞎）设计（蒙）的，我也不认为现在堆算力的黑箱大模型能狗屎运地自然接近 AGI ，等等。

_Originally posted by @FrankHB in https://github.com/Bylx666/key-lang/issues/28#issuecomment-2117319737_
            
### Glomzzz-3

刚从同济大学出来，在回家的路上看到你又发了长文。

---

中午和 mhyyyy 吃了顿饭，聊了聊家庭和我的人生规划

下午和同济的朋友共度了段美好的时光

这两天主要在忙这些，回到家后明天我会先把网站部署好。


---

#### 应试教育

应试教育的弊端是这样的，高分低能者

无论是高考还是高考后的卷绩点。

#### 兴趣颇多与半途而废

兴趣多对现在的我来说是很好的事，
我觉得半途而废里的途是由我这个主体定义的

打个比方我的目标是开发出来一个很简单的pl应用场景，例如给Asahi那个dsl加上purely function与lazy eval（不止加，我得把整个项目都重构一下，现在的样子太难看了）

当然我的目标实际上是更远一些的，例如Asaka真正实现完并在某游戏开发领域落地，vm基本实现并衍生出配套vm实践课程等

#### 建构秩序与自发秩序

看来我分析得很对，你确实很喜欢建构秩序。

#### 其他

对于德不配位的看法与堆算力的黑箱堆不出良好的agi，我的观点与你一致






